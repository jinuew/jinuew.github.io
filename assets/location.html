<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPS Location</title>
    <!-- 만약 카카오 지도 API를 사용한다면, 카카오 지도 API 스크립트를 추가해야 합니다. 예: -->
    <!-- <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=YOUR_APP_KEY"></script> -->
</head>
<body>
    <!-- 여기에 웹페이지의 내용을 추가할 수 있습니다. -->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8a8af8d16dfcad6fed49baae9e2b0da8&libraries=services"></script>
    <script>
        var gps_use = null;
        var gps_lat = null;
        var gps_lng = null;
        var gps_position;

        gps_check();

        function gps_check(){
            if (navigator.geolocation) {
                var options = {timeout:60000};
                navigator.geolocation.getCurrentPosition(showLocation, errorHandler, options);
            } else {
                alert("GPS_추적이 불가합니다.");
                gps_use = false;
            }
        }

        function showLocation(position) {
            gps_use = true;
            gps_lat = position.coords.latitude;
            gps_lng = position.coords.longitude;
        }

        function errorHandler(error) {
            if(error.code == 1) {
                alert("접근차단");
            } else if(error.code == 2) {
                alert("위치를 반환할 수 없습니다.");
            }
            gps_use = false;
        }

        function gps_tracking(){
            if (gps_use) {
                map.panTo(new kakao.maps.LatLng(gps_lat, gps_lng));
                var gps_content = '<div><img class="pulse" draggable="false" unselectable="on" src="https://ssl.pstatic.net/static/maps/m/pin_rd.png" alt=""></div>';
                var currentOverlay = new kakao.maps.CustomOverlay({
                    position: new kakao.maps.LatLng(gps_lat, gps_lng),
                    content: gps_content,
                    map: map
                });
                currentOverlay.setMap(map);
            } else {
                alert("접근차단하신 경우 새로고침, 아닌 경우 잠시만 기다려주세요.");
                gps_check();
            }
        }
    </script>
</body>
</html>
